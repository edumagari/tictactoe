import{_ as W}from"./AuthenticatedLayout-BjlFnQne.js";import{_ as X}from"./Modal-BvsjaV-9.js";import{P as C}from"./PrimaryButton-C--5msKu.js";import{k as p,h as O,F as v,p as P,o,c as $,w as _,b as t,f as r,m as B,l as E,t as f,n as y,a as x,u as m,d as z}from"./app-w89SguHT.js";import"./ApplicationLogo-172yrfar.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const l={InProgress:"InProgress",Stalemate:"Stalemate",XWins:"XWins",OWins:"OWins"},F=()=>{const a=p(l.InProgress);return{change:u=>a.value=u,current:()=>a.value,hasEnded:()=>[l.XWins,l.OWins,l.Stalemate].includes(a.value)}},I={class:"grid grid-cols-3 gap-1.5 w-0 min-w-fit mx-auto mt-12"},V={class:"bg-gray-300 size-32 grid place-items-center"},j=["onClick"],N=["textContent"],G={class:"max-w-sm mx-auto mt-6 space-y-2"},L={class:"flex items-center"},T=t("span",{class:"p-1.5 font-bold roudned bg-gray-200"},"X",-1),A={key:0,class:"flex items-center"},D=t("span",{class:"p-1.5 font-bold roudned bg-gray-200"},"X",-1),M={key:1},U={class:"p-6"},q={class:"text-6xl font-bold text-center my-12 font-mono uppercase"},H={key:0,class:"text-green-600"},J={key:1,class:"text-green-600"},K={key:2,class:"text-green-600"},Q={class:"mt-6 flex justify-end"},ne={__name:"Show",props:["game"],setup(a){const u=a,i=p(u.game.state??[0,0,0,0,0,0,0,0,0]),c=F(),d=p([]),b=O(()=>i.value.reduce((e,s)=>e+s,0)===0),k=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],w=e=>{i.value[e]=b.value?-1:1,v.put(route("games.update",u.game.id),{state:i.value}),S()},S=()=>{const e=k.map(s=>s.reduce((n,g)=>n+i.value[g],0)).find(s=>Math.abs(s)===3);if(e===-3){c.change(l.XWins);return}if(e===3){c.change(l.OWins);return}i.value.includes(0)||c.change(l.Stalemate)},h=()=>{i.value=[0,0,0,0,0,0,0,0,0],c.change(l.InProgress)};return Echo.join(`games.${u.game.id}`).here(e=>d.value=e).joining(e=>v.reload({onSuccess:()=>d.value.push(e)})).leaving(e=>d.value=d.value.filter(({id:s})=>s!==e.id)),P(()=>{Echo.leave(`games.${u.game.id}`)}),(e,s)=>(o(),$(W,null,{default:_(()=>[t("menu",I,[(o(!0),r(E,null,B(i.value,(n,g)=>(o(),r("li",V,[n===0?(o(),r("button",{key:0,onClick:R=>w(g),class:"place-self-stretch bg-gray-200 hover:bg-gray-300 transition-colors"},null,8,j)):(o(),r("span",{key:1,textContent:f(n===-1?"X":"O"),class:"text-4xl font-bold"},null,8,N))]))),256))]),t("ul",G,[t("li",L,[T,t("span",null,f(a.game.player_one.name),1),t("span",{class:y([{"!bg-green-500":d.value.find(({id:n})=>n===a.game.player_one_id)},"bg-red-500 size-2 rounded-full"])},null,2)]),a.game.player_two?(o(),r("li",A,[D,t("span",null,f(a.game.player_two.name),1),t("span",{class:y([{"!bg-green-500":d.value.find(({id:n})=>n===a.game.player_two_id)},"bg-red-500 size-2 rounded-full"])},null,2)])):(o(),r("li",M,"Waiting for player two..."))]),x(X,{onClose:s[1]||(s[1]=n=>h()),show:m(c).hasEnded()},{default:_(()=>[t("div",U,[t("div",q,[m(c).current()===m(l).XWins?(o(),r("span",H,"X has won!")):m(c).current()===m(l).OWins?(o(),r("span",J,"O has won!")):(o(),r("span",K,"Stalemate!"))]),t("div",Q,[x(C,{onClick:s[0]||(s[0]=n=>h())},{default:_(()=>[z("Play Again")]),_:1})])])]),_:1},8,["show"])]),_:1}))}};export{ne as default};
